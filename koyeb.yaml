# --- START OF koyeb.yaml ---

# 这个文件的作用是：用代码的形式定义你的Koyeb服务，强制覆盖所有UI上的错误设置。
# 它是解决问题的最终手段。

# 给你的应用起个名字
name: heatmap-bot-app

# 定义服务
services:
  # 服务名叫 "bot"
  - name: bot
    # 服务的类型是 web service
    type: web
    # 强制使用 Dockerfile 构建器
    builder: dockerfile
    # Dockerfile 的相关设置
    docker:
      # Dockerfile 的路径，就在根目录
      file: ./Dockerfile
    # 端口设置
    ports:
      - port: 8000
        protocol: http
    # 健康检查，Koyeb会用它来判断你的服务是否启动成功
    healthChecks:
      - path: /health
        port: 8000
        protocol: http
    # 环境变量：这里列出的变量会从你在Koyeb网页上设置的 secrets 和变量中读取
    env:
      - key: TELEGRAM_BOT_TOKEN
        from: secret
      - key: TELEGRAM_CHANNEL_ID
      - key: SCHEDULE_INTERVAL_HOURS
      - key: DEFAULT_TIMEFRAME

# --- END OF koyeb.yaml ---
